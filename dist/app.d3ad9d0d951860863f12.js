!function(e){function t(t){for(var r,o,c=t[0],s=t[1],u=t[2],f=0,d=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);d.length;)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={0:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;a.push([361,2]),n()}({360:function(e,t,n){},361:function(e,t,n){"use strict";n.r(t);var r=n(53),i=n.n(r),a={url:"https://aviasales-api.herokuapp.com"};function o(e,t,n,r,i,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function c(e){o(a,r,i,c,s,"next",e)}function s(e){o(a,r,i,c,s,"throw",e)}c(void 0)}))}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t.url}var t,n,r,a,o,u,l;return t=e,(n=[{key:"countries",value:(l=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(this.url,"/countries"));case 3:return t=e.sent,e.abrupt("return",Promise.resolve(t.data));case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return l.apply(this,arguments)})},{key:"cities",value:(u=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(this.url,"/cities"));case 3:return t=e.sent,e.abrupt("return",Promise.resolve(t.data));case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return u.apply(this,arguments)})},{key:"prices",value:(o=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(this.url,"/prices/cheap"),{params:t});case 3:return n=e.sent,e.abrupt("return",Promise.resolve(n.data));case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return o.apply(this,arguments)})},{key:"airlines",value:(a=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(this.url,"/airlines"));case 3:return t=e.sent,e.abrupt("return",Promise.resolve(t.data));case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return a.apply(this,arguments)})}])&&s(t.prototype,n),r&&s(t,r),e}())(a),l=n(364);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e,t,n,r,i,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){m(a,r,i,o,c,"next",e)}function c(e){m(a,r,i,o,c,"throw",e)}o(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=new(function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t,this.countries=null,this.cities=null,this.shortCitiesList={},this.airlines={},this.lastSearch={},this.formatDate=n.formatDate}var t,n,r,i,a;return t=e,(n=[{key:"init",value:(a=h(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.api.countries(),this.api.cities(),this.api.airlines()]);case 2:return t=e.sent,n=v(t,3),r=n[0],i=n[1],a=n[2],this.countries=this.convertCounties(r),this.cities=this.convertCities(i),this.shortCitiesList=this.createShortCitiesList(this.cities),this.airlines=this.convertAirLines(a),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"createShortCitiesList",value:function(e){return Object.entries(e).reduce((function(e,t){return e[v(t,2)[1].full_name]=null,e}),{})}},{key:"convertCounties",value:function(e){return e.reduce((function(e,t){return e[t.code]=t,e}),{})}},{key:"convertCities",value:function(e){var t=this;return e.reduce((function(e,n){var r=t.countries[n.country_code].name;n.name=n.name||n.name_translations.en;var i="".concat(n.name,", ").concat(r);return e[n.code]=d({},n,{country_name:r,full_name:i}),e}),{})}},{key:"convertAirLines",value:function(e){return e.reduce((function(e,t){return t.logo="http://pics.avs.io/200/200/".concat(t.code,".png"),t.name=t.name||t.name_translations.en,e[t.code]=t,e}),{})}},{key:"convertTickets",value:function(e){var t=this;return Object.values(e).map((function(e){return d({},e,{origin_name:t.getCityNameByCode(e.origin),destination_name:t.getCityNameByCode(e.destination),airline_logo:t.getAirlineLogoByCode(e.airline),airline_name:t.getAirlineNameByCode(e.airline),departure_at:t.formatDate(e.departure_at,"dd MMM yyyy hh:mm"),return_at:t.formatDate(e.return_at,"dd MMM yyyy hh:mm")})}))}},{key:"getCityCodeByKey",value:function(e){return Object.values(this.cities).find((function(t){return t.full_name===e})).code}},{key:"getCityNameByCode",value:function(e){return this.cities[e].name}},{key:"getCountryNameByCode",value:function(e){return this.countries[e].name}},{key:"getAirlineNameByCode",value:function(e){return this.airlines[e]?this.airlines[e].name:""}},{key:"getAirlineLogoByCode",value:function(e){return this.airlines[e]?this.airlines[e].logo:""}},{key:"fetchTickets",value:(i=h(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.prices(t);case 2:n=e.sent,this.lastSearch=this.convertTickets(n.data);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})}])&&y(t.prototype,n),r&&y(t,r),e}())(u,{formatDate:function(e,t){var n=new Date(e);return Object(l.a)(n,t)}});function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=[]}var t,n,r;return t=e,(n=[{key:"addTicketToStore",value:function(e){var t=!1;this.store.forEach((function(n){JSON.stringify(n)===JSON.stringify(e)&&(t=!0)})),t?M.toast({html:"Ticket had already added to favorite list",classes:"pink darken-2"}):(M.toast({html:"Ticket has added to favorite list",classes:"green lighten-1"}),this.store.push(e))}},{key:"removeTicketFromStore",value:function(e){this.store=this.store.filter((function(t){return JSON.stringify(t)!==JSON.stringify(e)}))}}])&&k(t.prototype,n),r&&k(t,r),e}()),w=(n(358),n(359),document.querySelectorAll("select"));M.FormSelect.init(w);var O=document.querySelectorAll(".autocomplete");M.Autocomplete.init(O,{data:{Apple:null,Microsoft:null,Google:null,Intel:null}});var C=document.querySelectorAll(".datepicker");M.Datepicker.init(C,{showClearBtn:!0,format:"yyyy-mm"});var S=document.querySelectorAll(".dropdown-trigger");M.Dropdown.init(S);n(360);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=new(function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=document.forms.locationControl,this.origin=document.getElementById("autocomplete-origin"),this.destination=document.getElementById("autocomplete-destination"),this.departDate=document.getElementById("datepicker-depart"),this.returnDate=document.getElementById("datepicker-return"),this.oroginAutocomplete=t(this.origin),this.destinationAutocomplete=t(this.destination),this.departDatePicker=n(this.departDate),this.returnDatePicker=n(this.returnDate)}var t,n,r;return t=e,(n=[{key:"setAutoCompleteData",value:function(e){this.oroginAutocomplete.updateData(e),this.destinationAutocomplete.updateData(e)}},{key:"isValidInput",value:function(){return!(!this.originValue||!this.destinationValue)}},{key:"form",get:function(){return this._form}},{key:"originValue",get:function(){return this.origin.value}},{key:"destinationValue",get:function(){return this.destination.value}},{key:"departDateValue",get:function(){return this.departDatePicker.toString()}},{key:"returnDateValue",get:function(){return this.returnDatePicker.toString()}}])&&P(t.prototype,n),r&&P(t,r),e}())((function(e){return M.Autocomplete.getInstance(e)}),(function(e){return M.Datepicker.getInstance(e)}));function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currency=document.getElementById("currency"),this.dictionary={USD:"$",EUR:"€"}}var t,n,r;return t=e,(n=[{key:"getCurrencySymbol",value:function(){return this.dictionary[this.currencyValue]}},{key:"currencyValue",get:function(){return this.currency.value}}])&&j(t.prototype,n),r&&j(t,r),e}());function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=document.querySelector(".tickets-section .row"),this.getCurrencySymbol=t.getCurrencySymbol.bind(t),this.renderedItems={}}var t,n,r;return t=e,r=[{key:"emptyMsgTemplate",value:function(){return'\n      <div class="tickets-empty-res-msg">\n        Nothing be found according your query\n      </div>\n    '}},{key:"ticketTemplate",value:function(e,t){return'\n    <div class="col s12 m6">\n      <div class="card ticket-card">\n        <div class="ticket-airline d-flex align-items-center">\n          <img src="'.concat(e.airline_logo,'" class="ticket-airline-img"/>\n          <span class="ticket-airline-name">').concat(e.airline_name,'</span>\n        </div>\n        <div class="ticket-destination d-flex align-items-center">\n          <div class="d-flex align-items-center mr-auto">\n            <span class="ticket-city">').concat(e.origin_name,'</span>\n            <i class="medium material-icons">flight_takeoff</i>\n          </div>\n          <div class="d-flex align-items-center ml-auto">\n            <i class="medium material-icons">flight_land</i>\n            <span class="ticket-city">').concat(e.destination_name,'</span>\n          </div>\n        </div>\n        <div class="ticket-time-price d-flex align-items-center">\n          <span class="ticket-time-departure">').concat(e.departure_at,'</span>\n          <span class="ticket-price ml-auto">').concat(t).concat(e.price,'</span>\n        </div>\n        <div class="ticket-additional-info">\n          <span class="ticket-transfers">Пересадок: ').concat(e.transfers,'</span>\n          <span class="ticket-flight-number">Номер рейсу: ').concat(e.flight_number,'</span>\n        </div>\n        <a class="waves-effect waves-light btn-small green darken-1 add-favorite ml-auto" data-current-ticket=\'').concat(JSON.stringify(e),"'>Add to favorites</a>\n      </div>\n    </div>\n    ")}}],(n=[{key:"renderTickets",value:function(t){this.clearContainer(),t.length||this.showEmptyMsg();var n="",r=this.getCurrencySymbol();t.forEach((function(t){var i=e.ticketTemplate(t,r);n+=i})),this.container.insertAdjacentHTML("afterbegin",n),this.renderedItems=document.querySelectorAll(".add-favorite")}},{key:"clearContainer",value:function(){this.container.innerHTML=""}},{key:"showEmptyMsg",value:function(){var t=e.emptyMsgTemplate();this.container.insertAdjacentHTML("afterbegin",t)}}])&&_(t.prototype,n),r&&_(t,r),e}())(x);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=document.querySelector(".dropdown-content"),this.btnDelete="",this.getCurrencySymbol=t.getCurrencySymbol.bind(t)}var t,n,r;return t=e,r=[{key:"favoriteTemplate",value:function(e,t){return'\n     <div class="favorite-item  d-flex align-items-start">\n      <img src="'.concat(e.airline_logo,'" class="favorite-item-airline-img"/>\n      <div class="favorite-item-info d-flex flex-column">\n        <div class="favorite-item-destination d-flex align-items-center">\n          <div class="d-flex align-items-center mr-auto">\n            <span class="favorite-item-city">').concat(e.origin_name,'</span>\n            <i class="medium material-icons">flight_takeoff</i>\n          </div>\n          <div class="d-flex align-items-center">\n            <i class="medium material-icons">flight_land</i>\n            <span class="favorite-item-city">').concat(e.destination_name,'</span>\n          </div>\n        </div>\n        <div class="ticket-time-price d-flex align-items-center">\n          <span class="ticket-time-departure">').concat(e.departure_at,'</span>\n          <span class="ticket-price ml-auto">').concat(t).concat(e.price,'</span>\n        </div>\n        <div class="ticket-additional-info">\n          <span class="ticket-transfers">Пересадок: ').concat(e.transfers,'</span>\n          <span class="ticket-flight-number">Номер рейса: ').concat(e.flight_number,'</span>\n        </div>\n        <a class="waves-effect waves-light btn-small pink darken-3 delete-favorite ml-auto" data-current-ticket=\'').concat(JSON.stringify(e),"'>Delete</a>\n      </div>\n     </div>\n    ")}}],(n=[{key:"renderFavoriteTickets",value:function(t){this.clearContainer();var n="",r=this.getCurrencySymbol();t.forEach((function(t){var i=e.favoriteTemplate(t,r);n+=i})),this.container.insertAdjacentHTML("afterbegin",n),this.btnDelete=document.querySelector(".delete-favorite")}},{key:"clearContainer",value:function(){this.container.innerHTML=""}}])&&A(t.prototype,n),r&&A(t,r),e}())(x);function E(e,t,n,r,i,a,o){try{var c=e[a](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){E(a,r,i,o,c,"next",e)}function c(e){E(a,r,i,o,c,"throw",e)}o(void 0)}))}}document.addEventListener("DOMContentLoaded",(function(e){function t(){return(t=B(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.init();case 2:T.setAutoCompleteData(g.shortCitiesList);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=B(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.isValidInput()){e.next=6;break}return T.origin.classList.contains("invalid")||T.origin.classList.add("invalid"),T.destination.classList.contains("invalid")||T.destination.classList.add("invalid"),M.toast({html:"Please input values",classes:"pink darken-2"}),e.abrupt("return");case 6:return T.origin.classList.remove("invalid"),T.destination.classList.remove("invalid"),t=g.getCityCodeByKey(T.originValue),n=g.getCityCodeByKey(T.destinationValue),r=T.departDateValue,i=T.returnDateValue,a=x.currencyValue,e.next=15,g.fetchTickets({origin:t,destination:n,depart_date:r,return_date:i,currency:a});case 15:D.renderTickets(g.lastSearch);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}(),T.form.addEventListener("submit",(function(e){e.preventDefault(),function(){n.apply(this,arguments)}()})),D.container.addEventListener("click",(function(e){if(e.target.classList.contains("add-favorite")){var t=JSON.parse(e.target.dataset.currentTicket);b.addTicketToStore(t),L.renderFavoriteTickets(b.store),e.target.innerText="Added to favorite",e.target.classList.add("darken-4")}})),L.container.addEventListener("click",(function(e){if(e.target.classList.contains("delete-favorite")){var t=JSON.parse(e.target.dataset.currentTicket);b.removeTicketFromStore(t),L.renderFavoriteTickets(b.store),D.renderedItems.forEach((function(e){e.dataset.currentTicket===JSON.stringify(t)&&(e.innerText="Add to favorite",e.classList.remove("darken-4"))})),M.toast({html:"Ticket has removed from favorite list",classes:"green lighten-1"})}}))})),console.log("Production mode")}});